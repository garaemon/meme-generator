# **プロジェクト計画書：ブラウザ完結型 Meme Generator**

本プロジェクトは、サーバーサイドのデータベースを一切使用せず、ブラウザの高度なストレージ機能とCanvas APIを活用して、高品質なMeme（ミーム）の作成・管理・保存を実現するウェブアプリケーションです。

## **1\. コンセプト**

* **DBレス・サーバーレス**: ユーザーの画像や履歴はすべてブラウザ内（IndexedDB）に保存。  
* **リッチな編集体験**: ドラッグ＆ドロップ、フォント・色の自由な調整。  
* **タイムライン機能**: 過去に作った作品をいつでも閲覧・再編集可能。

## **2\. 技術スタック**

| カテゴリ | 選定技術 | 理由 |
| :---- | :---- | :---- |
| **Framework** | **Next.js (React)** | UI構築の効率性と、静的書き出しによるホスティングの容易さ。 |
| **Canvas Engine** | **Fabric.js** | テキストや画像を「オブジェクト」として扱え、移動・回転・リサイズが容易。 |
| **Local Storage** | **Dexie.js** | IndexedDBをSQLライクに扱えるラッパー。大容量の画像データ保存に適。 |
| **Styling** | **Tailwind CSS** | レスポンシブなエディタ画面を高速に構築。 |
| **Icons** | **Lucide React** | シンプルで一貫性のあるUIアイコン。 |

## **3\. 機能仕様**

### **3.1 テンプレートギャラリー**

* **プリセット**: 有名なミーム画像（Drake, Distracted Boyfriend 等）を初期搭載。  
* **カスタムアップロード**: ユーザーが手持ちの画像をテンプレートとして追加可能。  
* **管理**: 追加したカスタムテンプレートの削除機能。

### **3.2 編集エディタ（Canvas）**

* **テキスト操作**:  
  * 複数テキストの配置。  
  * フォント変更（Meme定番のImpact体 / Anton等）。  
  * 文字色・縁取り（アウトライン）の色と太さの調整。  
* **オブジェクト操作**: ドラッグによる移動、リサイズ、重なり順の変更。  
* **プレビュー**: リアルタイムで合成結果を確認。

### **3.3 タイムライン（作成履歴）**

* **自動保存**: 「ダウンロード」実行時に作成データ（画像 ＋ 編集用JSON）をIndexedDBに保存。  
* **一覧表示**: 過去の作品を時系列でカード表示。  
* **再編集**: 履歴をクリックすると、当時のテキスト内容や配置を維持したまま再編集モードへ移行。

### **3.4 書き出し**

* **フォーマット**: PNG / JPEG 形式。  
* **処理**: Canvasの内容をBlob化し、ブラウザのダウンロード機能を介して保存。

## **4\. データ構造案 (Dexie.js / IndexedDB)**

// DB定義イメージ  
const db \= new Dexie('MemeGeneratorDB');  
db.version(1).stores({  
  templates: '++id, name, addedAt', // ユーザー追加テンプレート  
  history: '++id, createdAt'        // 作成履歴（画像Blob \+ Fabric JSON）  
});

## **5\. 開発ロードマップ（5ステップ）**

### **Step 1: Canvasコア実装 (Day 1-2)**

* Fabric.jsの導入。  
* 背景画像の読み込みと、テキストオブジェクトの追加・移動・リサイズ機能。  
* 基本的なレイアウト（左にCanvas、右に設定パネル）。

### **Step 2: 編集UIとスタイリング (Day 3-4)**

* テキストのフォント、カラーピッカー、アウトライン調整UIの実装。  
* Canvasの内容を画像ファイル（PNG/JPEG）としてダウンロードする機能。

### **Step 3: ローカルDB (Dexie.js) の統合 (Day 5-6)**

* Dexie.jsによるデータ保存ロジックの実装。  
* 画像アップロード機能と、それをテンプレートとして保存する機能。  
* ダウンロード時に「履歴」として自動保存する処理。

### **Step 4: ギャラリー & タイムラインUI (Day 7-8)**

* サイドバーまたは別画面でのテンプレート一覧表示。  
* 過去の作成作品をカード型で表示するタイムライン画面の構築。  
* 履歴データからの「再編集（loadFromJSON）」機能。

### **Step 5: ブラッシュアップ (Day 9-10)**

* レスポンシブ対応（モバイルでの操作感調整）。  
* ローカルデータのインポート/エクスポート機能（バックアップ用）。  
* パフォーマンス最適化（画像の圧縮保存など）。

## **6\. 参考リソース・ソース**

* [Fabric.js Documentation](http://fabricjs.com/) \- Canvas操作の標準ライブラリ  
* [Dexie.js Documentation](https://dexie.org/) \- IndexedDBのベストプラクティス  
* [Imgflip API](https://imgflip.com/api) \- 有名なMemeの画像URLおよびメタデータの取得元  
* [Google Fonts \- Anton](https://fonts.google.com/specimen/Anton) \- Memeに最適なフォント